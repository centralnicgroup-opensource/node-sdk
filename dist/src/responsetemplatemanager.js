import { ResponseParser } from "./responseparser";
import { ResponseTemplate } from "./responsetemplate";
var ResponseTemplateManager = (function () {
    function ResponseTemplateManager() {
        this.templates = {
            404: this.generateTemplate("421", "Page not found"),
            500: this.generateTemplate("500", "Internal server error"),
            empty: this.generateTemplate("423", "Empty API response. Probably unreachable API end point {CONNECTION_URL}"),
            error: this.generateTemplate("421", "Command failed due to server error. Client should try again"),
            expired: this.generateTemplate("530", "SESSION NOT FOUND"),
            httperror: this.generateTemplate("421", "Command failed due to HTTP communication error"),
            invalid: this.generateTemplate("423", "Invalid API response. Contact Support"),
            unauthorized: this.generateTemplate("530", "Unauthorized"),
        };
    }
    ResponseTemplateManager.getInstance = function () {
        if (!ResponseTemplateManager.instance) {
            ResponseTemplateManager.instance = new ResponseTemplateManager();
        }
        return ResponseTemplateManager.instance;
    };
    ResponseTemplateManager.prototype.generateTemplate = function (code, description) {
        return "[RESPONSE]\r\nCODE=" + code + "\r\nDESCRIPTION=" + description + "\r\nEOF\r\n";
    };
    ResponseTemplateManager.prototype.addTemplate = function (id, plain) {
        this.templates[id] = plain;
        return ResponseTemplateManager.instance;
    };
    ResponseTemplateManager.prototype.getTemplate = function (id) {
        if (this.hasTemplate(id)) {
            return new ResponseTemplate(this.templates[id]);
        }
        return new ResponseTemplate(this.generateTemplate("500", "Response Template not found"));
    };
    ResponseTemplateManager.prototype.getTemplates = function () {
        var _this = this;
        var tpls = {};
        Object.keys(this.templates).forEach(function (key) {
            tpls[key] = new ResponseTemplate(_this.templates[key]);
        });
        return tpls;
    };
    ResponseTemplateManager.prototype.hasTemplate = function (id) {
        return Object.prototype.hasOwnProperty.call(this.templates, id);
    };
    ResponseTemplateManager.prototype.isTemplateMatchHash = function (tpl2, id) {
        var h = this.getTemplate(id).getHash();
        return h.CODE === tpl2.CODE && h.DESCRIPTION === tpl2.DESCRIPTION;
    };
    ResponseTemplateManager.prototype.isTemplateMatchPlain = function (plain, id) {
        var h = this.getTemplate(id).getHash();
        var tpl2 = ResponseParser.parse(plain);
        return h.CODE === tpl2.CODE && h.DESCRIPTION === tpl2.DESCRIPTION;
    };
    return ResponseTemplateManager;
}());
export { ResponseTemplateManager };
ResponseTemplateManager.getInstance();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzcG9uc2V0ZW1wbGF0ZW1hbmFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcmVzcG9uc2V0ZW1wbGF0ZW1hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBS3REO0lBb0JFO1FBQ0UsSUFBSSxDQUFDLFNBQVMsR0FBRztZQUNmLEdBQUcsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLGdCQUFnQixDQUFDO1lBQ25ELEdBQUcsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLHVCQUF1QixDQUFDO1lBQzFELEtBQUssRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQzFCLEtBQUssRUFDTCx5RUFBeUUsQ0FDMUU7WUFDRCxLQUFLLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUMxQixLQUFLLEVBQ0wsNkRBQTZELENBQzlEO1lBQ0QsT0FBTyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsbUJBQW1CLENBQUM7WUFDMUQsU0FBUyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FDOUIsS0FBSyxFQUNMLGdEQUFnRCxDQUNqRDtZQUNELE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQzVCLEtBQUssRUFDTCx1Q0FBdUMsQ0FDeEM7WUFDRCxZQUFZLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRSxjQUFjLENBQUM7U0FDM0QsQ0FBQztJQUNKLENBQUM7SUF0Q2EsbUNBQVcsR0FBekI7UUFDRSxJQUFJLENBQUMsdUJBQXVCLENBQUMsUUFBUSxFQUFFO1lBQ3JDLHVCQUF1QixDQUFDLFFBQVEsR0FBRyxJQUFJLHVCQUF1QixFQUFFLENBQUM7U0FDbEU7UUFDRCxPQUFPLHVCQUF1QixDQUFDLFFBQVEsQ0FBQztJQUMxQyxDQUFDO0lBeUNNLGtEQUFnQixHQUF2QixVQUF3QixJQUFZLEVBQUUsV0FBbUI7UUFDdkQsT0FBTyx3QkFBc0IsSUFBSSx3QkFBbUIsV0FBVyxnQkFBYSxDQUFDO0lBQy9FLENBQUM7SUFRTSw2Q0FBVyxHQUFsQixVQUFtQixFQUFVLEVBQUUsS0FBYTtRQUMxQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUMzQixPQUFPLHVCQUF1QixDQUFDLFFBQVEsQ0FBQztJQUMxQyxDQUFDO0lBT00sNkNBQVcsR0FBbEIsVUFBbUIsRUFBVTtRQUMzQixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDeEIsT0FBTyxJQUFJLGdCQUFnQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNqRDtRQUNELE9BQU8sSUFBSSxnQkFBZ0IsQ0FDekIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRSw2QkFBNkIsQ0FBQyxDQUM1RCxDQUFDO0lBQ0osQ0FBQztJQU1NLDhDQUFZLEdBQW5CO1FBQUEsaUJBTUM7UUFMQyxJQUFNLElBQUksR0FBUSxFQUFFLENBQUM7UUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUMsR0FBRztZQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxLQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFPTSw2Q0FBVyxHQUFsQixVQUFtQixFQUFVO1FBQzNCLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQVFNLHFEQUFtQixHQUExQixVQUEyQixJQUFTLEVBQUUsRUFBVTtRQUM5QyxJQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3pDLE9BQU8sQ0FBQyxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxXQUFXLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUNwRSxDQUFDO0lBUU0sc0RBQW9CLEdBQTNCLFVBQTRCLEtBQWEsRUFBRSxFQUFVO1FBQ25ELElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDekMsSUFBTSxJQUFJLEdBQUcsY0FBYyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6QyxPQUFPLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsV0FBVyxLQUFLLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDcEUsQ0FBQztJQUNILDhCQUFDO0FBQUQsQ0FBQyxBQTNIRCxJQTJIQzs7QUFFRCx1QkFBdUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc3BvbnNlUGFyc2VyIH0gZnJvbSBcIi4vcmVzcG9uc2VwYXJzZXJcIjtcbmltcG9ydCB7IFJlc3BvbnNlVGVtcGxhdGUgfSBmcm9tIFwiLi9yZXNwb25zZXRlbXBsYXRlXCI7XG5cbi8qKlxuICogUmVzcG9uc2VUZW1wbGF0ZU1hbmFnZXIgU2luZ2xldG9uIENsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNwb25zZVRlbXBsYXRlTWFuYWdlciB7XG4gIC8qKlxuICAgKiBHZXQgUmVzcG9uc2VUZW1wbGF0ZU1hbmFnZXIgSW5zdGFuY2VcbiAgICogQHJldHVybnMgUmVzcG9uc2VUZW1wbGF0ZU1hbmFnZXIgSW5zdGFuY2VcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogUmVzcG9uc2VUZW1wbGF0ZU1hbmFnZXIge1xuICAgIGlmICghUmVzcG9uc2VUZW1wbGF0ZU1hbmFnZXIuaW5zdGFuY2UpIHtcbiAgICAgIFJlc3BvbnNlVGVtcGxhdGVNYW5hZ2VyLmluc3RhbmNlID0gbmV3IFJlc3BvbnNlVGVtcGxhdGVNYW5hZ2VyKCk7XG4gICAgfVxuICAgIHJldHVybiBSZXNwb25zZVRlbXBsYXRlTWFuYWdlci5pbnN0YW5jZTtcbiAgfVxuICAvKipcbiAgICogUmVzcG9uc2VUZW1wbGF0ZU1hbmFnZXIgSW5zdGFuY2VcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBSZXNwb25zZVRlbXBsYXRlTWFuYWdlcjtcbiAgLyoqXG4gICAqIHRlbXBsYXRlIGNvbnRhaW5lclxuICAgKi9cbiAgcHJpdmF0ZSB0ZW1wbGF0ZXM6IGFueTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGVtcGxhdGVzID0ge1xuICAgICAgNDA0OiB0aGlzLmdlbmVyYXRlVGVtcGxhdGUoXCI0MjFcIiwgXCJQYWdlIG5vdCBmb3VuZFwiKSxcbiAgICAgIDUwMDogdGhpcy5nZW5lcmF0ZVRlbXBsYXRlKFwiNTAwXCIsIFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIpLFxuICAgICAgZW1wdHk6IHRoaXMuZ2VuZXJhdGVUZW1wbGF0ZShcbiAgICAgICAgXCI0MjNcIixcbiAgICAgICAgXCJFbXB0eSBBUEkgcmVzcG9uc2UuIFByb2JhYmx5IHVucmVhY2hhYmxlIEFQSSBlbmQgcG9pbnQge0NPTk5FQ1RJT05fVVJMfVwiXG4gICAgICApLFxuICAgICAgZXJyb3I6IHRoaXMuZ2VuZXJhdGVUZW1wbGF0ZShcbiAgICAgICAgXCI0MjFcIixcbiAgICAgICAgXCJDb21tYW5kIGZhaWxlZCBkdWUgdG8gc2VydmVyIGVycm9yLiBDbGllbnQgc2hvdWxkIHRyeSBhZ2FpblwiXG4gICAgICApLFxuICAgICAgZXhwaXJlZDogdGhpcy5nZW5lcmF0ZVRlbXBsYXRlKFwiNTMwXCIsIFwiU0VTU0lPTiBOT1QgRk9VTkRcIiksXG4gICAgICBodHRwZXJyb3I6IHRoaXMuZ2VuZXJhdGVUZW1wbGF0ZShcbiAgICAgICAgXCI0MjFcIixcbiAgICAgICAgXCJDb21tYW5kIGZhaWxlZCBkdWUgdG8gSFRUUCBjb21tdW5pY2F0aW9uIGVycm9yXCJcbiAgICAgICksXG4gICAgICBpbnZhbGlkOiB0aGlzLmdlbmVyYXRlVGVtcGxhdGUoXG4gICAgICAgIFwiNDIzXCIsXG4gICAgICAgIFwiSW52YWxpZCBBUEkgcmVzcG9uc2UuIENvbnRhY3QgU3VwcG9ydFwiXG4gICAgICApLFxuICAgICAgdW5hdXRob3JpemVkOiB0aGlzLmdlbmVyYXRlVGVtcGxhdGUoXCI1MzBcIiwgXCJVbmF1dGhvcml6ZWRcIiksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBBUEkgcmVzcG9uc2UgdGVtcGxhdGUgc3RyaW5nIGZvciBnaXZlbiBjb2RlIGFuZCBkZXNjcmlwdGlvblxuICAgKiBAcGFyYW0gY29kZSBBUEkgcmVzcG9uc2UgY29kZVxuICAgKiBAcGFyYW0gZGVzY3JpcHRpb24gQVBJIHJlc3BvbnNlIGRlc2NyaXB0aW9uXG4gICAqIEByZXR1cm5zIGdlbmVyYXRlIHJlc3BvbnNlIHRlbXBsYXRlIHN0cmluZ1xuICAgKi9cbiAgcHVibGljIGdlbmVyYXRlVGVtcGxhdGUoY29kZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFtSRVNQT05TRV1cXHJcXG5DT0RFPSR7Y29kZX1cXHJcXG5ERVNDUklQVElPTj0ke2Rlc2NyaXB0aW9ufVxcclxcbkVPRlxcclxcbmA7XG4gIH1cblxuICAvKipcbiAgICogQWRkIHJlc3BvbnNlIHRlbXBsYXRlIHRvIHRlbXBsYXRlIGNvbnRhaW5lclxuICAgKiBAcGFyYW0gaWQgdGVtcGxhdGUgaWRcbiAgICogQHBhcmFtIHBsYWluIEFQSSBwbGFpbiByZXNwb25zZVxuICAgKiBAcmV0dXJucyBSZXNwb25zZVRlbXBsYXRlTWFuYWdlciBpbnN0YW5jZSBmb3IgbWV0aG9kIGNoYWluaW5nXG4gICAqL1xuICBwdWJsaWMgYWRkVGVtcGxhdGUoaWQ6IHN0cmluZywgcGxhaW46IHN0cmluZyk6IFJlc3BvbnNlVGVtcGxhdGVNYW5hZ2VyIHtcbiAgICB0aGlzLnRlbXBsYXRlc1tpZF0gPSBwbGFpbjtcbiAgICByZXR1cm4gUmVzcG9uc2VUZW1wbGF0ZU1hbmFnZXIuaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlc3BvbnNlIHRlbXBsYXRlIGluc3RhbmNlIGZyb20gdGVtcGxhdGUgY29udGFpbmVyXG4gICAqIEBwYXJhbSBpZCB0ZW1wbGF0ZSBpZFxuICAgKiBAcmV0dXJucyB0ZW1wbGF0ZSBpbnN0YW5jZVxuICAgKi9cbiAgcHVibGljIGdldFRlbXBsYXRlKGlkOiBzdHJpbmcpOiBSZXNwb25zZVRlbXBsYXRlIHtcbiAgICBpZiAodGhpcy5oYXNUZW1wbGF0ZShpZCkpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2VUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlc1tpZF0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlVGVtcGxhdGUoXG4gICAgICB0aGlzLmdlbmVyYXRlVGVtcGxhdGUoXCI1MDBcIiwgXCJSZXNwb25zZSBUZW1wbGF0ZSBub3QgZm91bmRcIilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbGwgYXZhaWxhYmxlIHJlc3BvbnNlIHRlbXBsYXRlc1xuICAgKiBAcmV0dXJucyBhbGwgYXZhaWxhYmxlIHJlc3BvbnNlIHRlbXBsYXRlIGluc3RhbmNlc1xuICAgKi9cbiAgcHVibGljIGdldFRlbXBsYXRlcygpOiBhbnkge1xuICAgIGNvbnN0IHRwbHM6IGFueSA9IHt9O1xuICAgIE9iamVjdC5rZXlzKHRoaXMudGVtcGxhdGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRwbHNba2V5XSA9IG5ldyBSZXNwb25zZVRlbXBsYXRlKHRoaXMudGVtcGxhdGVzW2tleV0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0cGxzO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGdpdmVuIHRlbXBsYXRlIGV4aXN0cyBpbiB0ZW1wbGF0ZSBjb250YWluZXJcbiAgICogQHBhcmFtIGlkIHRlbXBsYXRlIGlkXG4gICAqIEByZXR1cm5zIGJvb2xlYW4gcmVzdWx0XG4gICAqL1xuICBwdWJsaWMgaGFzVGVtcGxhdGUoaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy50ZW1wbGF0ZXMsIGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBnaXZlbiBBUEkgcmVzcG9uc2UgaGFzaCBtYXRjaGVzIGEgZ2l2ZW4gdGVtcGxhdGUgYnkgY29kZSBhbmQgZGVzY3JpcHRpb25cbiAgICogQHBhcmFtIHRwbDIgYXBpIHJlc3BvbnNlIGhhc2hcbiAgICogQHBhcmFtIGlkIHRlbXBsYXRlIGlkXG4gICAqIEByZXR1cm5zIGJvb2xlYW4gcmVzdWx0XG4gICAqL1xuICBwdWJsaWMgaXNUZW1wbGF0ZU1hdGNoSGFzaCh0cGwyOiBhbnksIGlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBoID0gdGhpcy5nZXRUZW1wbGF0ZShpZCkuZ2V0SGFzaCgpO1xuICAgIHJldHVybiBoLkNPREUgPT09IHRwbDIuQ09ERSAmJiBoLkRFU0NSSVBUSU9OID09PSB0cGwyLkRFU0NSSVBUSU9OO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGdpdmVuIEFQSSBwbGFpbiByZXNwb25zZSBtYXRjaGVzIGEgZ2l2ZW4gdGVtcGxhdGUgYnkgY29kZSBhbmQgZGVzY3JpcHRpb25cbiAgICogQHBhcmFtIHBsYWluIEFQSSBwbGFpbiByZXNwb25zZVxuICAgKiBAcGFyYW0gaWQgdGVtcGxhdGUgaWRcbiAgICogQHJldHVybnMgYm9vbGVhbiByZXN1bHRcbiAgICovXG4gIHB1YmxpYyBpc1RlbXBsYXRlTWF0Y2hQbGFpbihwbGFpbjogc3RyaW5nLCBpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaCA9IHRoaXMuZ2V0VGVtcGxhdGUoaWQpLmdldEhhc2goKTtcbiAgICBjb25zdCB0cGwyID0gUmVzcG9uc2VQYXJzZXIucGFyc2UocGxhaW4pO1xuICAgIHJldHVybiBoLkNPREUgPT09IHRwbDIuQ09ERSAmJiBoLkRFU0NSSVBUSU9OID09PSB0cGwyLkRFU0NSSVBUSU9OO1xuICB9XG59XG5cblJlc3BvbnNlVGVtcGxhdGVNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4iXX0=